<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Operations Dashboard Demo | CaminhoIT</title>
    
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/dashboard.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark dashboard-nav">
        <div class="container-fluid px-4">
            <a class="navbar-brand d-flex align-items-center" href="/">
                <img src="https://caminhoit.com/assets/logo.png" alt="CaminhoIT" height="32">
                <span class="ms-2 fw-bold">Operations</span>
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto align-items-center">
                    <li class="nav-item">
                        <a class="nav-link" href="staff-tickets.php">
                            <i class="bi bi-ticket-detailed"></i> Tickets
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="invoices.php">
                            <i class="bi bi-receipt"></i> Invoices
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="orders.php">
                            <i class="bi bi-box-seam"></i> Orders
                        </a>
                    </li>
                    <li class="nav-item ms-3">
                        <div class="user-badge">
                            <i class="bi bi-person-circle"></i>
                            <span>Admin User</span>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Dashboard -->
    <div class="dashboard-container">
        <!-- 1. 72-HOUR COMPANY PULSE -->
        <section class="pulse-section">
            <div class="section-header">
                <h1 class="section-title">
                    <i class="bi bi-lightning-charge-fill pulse-icon"></i>
                    72-Hour Company Pulse
                </h1>
                <p class="section-subtitle">Your business heartbeat at a glance</p>
            </div>
            
            <div class="pulse-grid">
                <!-- Traffic Trend -->
                <div class="pulse-card">
                    <div class="pulse-card-header">
                        <i class="bi bi-graph-up"></i>
                        <span>Traffic Trend</span>
                    </div>
                    <div class="pulse-card-value">
                        1,247
                    </div>
                    <div class="pulse-card-trend trend-up">
                        <i class="bi bi-arrow-up"></i>
                        12.5% vs yesterday
                    </div>
                </div>
                
                <!-- New Signups -->
                <div class="pulse-card">
                    <div class="pulse-card-header">
                        <i class="bi bi-person-plus"></i>
                        <span>New Signups</span>
                    </div>
                    <div class="pulse-card-value">
                        34
                    </div>
                    <div class="pulse-card-trend trend-neutral">
                        Last 72 hours
                    </div>
                </div>
                
                <!-- MRR -->
                <div class="pulse-card pulse-card-highlight">
                    <div class="pulse-card-header">
                        <i class="bi bi-currency-dollar"></i>
                        <span>MRR</span>
                    </div>
                    <div class="pulse-card-value">
                        £24,567.89
                    </div>
                    <div class="pulse-card-trend trend-up">
                        <i class="bi bi-arrow-up"></i>
                        8.3% vs last month
                    </div>
                </div>
                
                <!-- Top Event -->
                <div class="pulse-card">
                    <div class="pulse-card-header">
                        <i class="bi bi-star-fill"></i>
                        <span>Top Category</span>
                    </div>
                    <div class="pulse-card-value" style="font-size: 1.5rem;">
                        API Support
                    </div>
                    <div class="pulse-card-trend trend-neutral">
                        Most common this week
                    </div>
                </div>
            </div>
        </section>

        <!-- 2 & 7. ATTENTION NEEDED + SUPPORT COMMAND CENTER -->
        <div class="row g-4 mb-4">
            <div class="col-lg-4">
                <!-- ATTENTION NEEDED PANEL -->
                <div class="attention-panel">
                    <div class="panel-header">
                        <h2 class="panel-title">
                            <i class="bi bi-exclamation-diamond-fill"></i>
                            Attention Needed
                        </h2>
                    </div>
                    <div class="panel-body">
                        <a href="#" class="attention-item attention-danger">
                            <div class="attention-icon">
                                <i class="bi bi-exclamation-triangle-fill"></i>
                            </div>
                            <div class="attention-content">
                                <div class="attention-title">3 Overdue Invoice(s)</div>
                                <div class="attention-desc">Immediate action required</div>
                            </div>
                            <i class="bi bi-chevron-right"></i>
                        </a>
                        <a href="#" class="attention-item attention-warning">
                            <div class="attention-icon">
                                <i class="bi bi-clock-history"></i>
                            </div>
                            <div class="attention-content">
                                <div class="attention-title">7 Tickets Older Than 5 Days</div>
                                <div class="attention-desc">Review and prioritize</div>
                            </div>
                            <i class="bi bi-chevron-right"></i>
                        </a>
                        <a href="#" class="attention-item attention-warning">
                            <div class="attention-icon">
                                <i class="bi bi-exclamation-circle-fill"></i>
                            </div>
                            <div class="attention-content">
                                <div class="attention-title">5 High Priority Ticket(s)</div>
                                <div class="attention-desc">Requires immediate attention</div>
                            </div>
                            <i class="bi bi-chevron-right"></i>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-8">
                <!-- SUPPORT COMMAND CENTER -->
                <div class="support-panel">
                    <div class="panel-header">
                        <h2 class="panel-title">
                            <i class="bi bi-headset"></i>
                            Support Command Center
                        </h2>
                        <div class="panel-actions">
                            <select class="form-select form-select-sm">
                                <option>2+ days old</option>
                                <option selected>5+ days old</option>
                                <option>7+ days old</option>
                            </select>
                        </div>
                    </div>
                    <div class="panel-body">
                        <div class="support-stats">
                            <div class="support-stat">
                                <div class="stat-value">23</div>
                                <div class="stat-label">Open Tickets</div>
                            </div>
                            <div class="support-stat">
                                <div class="stat-value">7</div>
                                <div class="stat-label">Aged Tickets</div>
                            </div>
                            <div class="support-stat">
                                <div class="stat-value">5</div>
                                <div class="stat-label">High Priority</div>
                            </div>
                        </div>
                        
                        <div class="priority-tickets mt-4">
                            <h6 class="mb-3">High Priority Tickets</h6>
                            <a href="#" class="priority-ticket-item">
                                <div class="priority-badge">HIGH</div>
                                <div class="priority-info">
                                    <div class="priority-title">API Authentication Issues</div>
                                    <div class="priority-meta">Acme Corp • Dec 8, 2025</div>
                                </div>
                            </a>
                            <a href="#" class="priority-ticket-item">
                                <div class="priority-badge">HIGH</div>
                                <div class="priority-info">
                                    <div class="priority-title">Database Connection Timeout</div>
                                    <div class="priority-meta">Tech Solutions Ltd • Dec 9, 2025</div>
                                </div>
                            </a>
                            <a href="#" class="priority-ticket-item">
                                <div class="priority-badge">HIGH</div>
                                <div class="priority-info">
                                    <div class="priority-title">Email Delivery Failed</div>
                                    <div class="priority-meta">Global Enterprises • Dec 10, 2025</div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 3. REVENUE & PAYMENTS HUB -->
        <section class="revenue-section">
            <div class="panel-header">
                <h2 class="panel-title">
                    <i class="bi bi-cash-stack"></i>
                    Revenue & Payments Hub
                </h2>
            </div>
            
            <div class="row g-4 mb-4">
                <div class="col-lg-4">
                    <div class="revenue-gauge">
                        <div class="gauge-header">Revenue Realization</div>
                        <div class="gauge-chart">
                            <canvas id="revenueGauge"></canvas>
                        </div>
                        <div class="gauge-stats">
                            <div class="gauge-stat">
                                <div class="gauge-label">Realized</div>
                                <div class="gauge-value">£18,450.00</div>
                            </div>
                            <div class="gauge-stat">
                                <div class="gauge-label">Expected</div>
                                <div class="gauge-value">£24,600.00</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-8">
                    <div class="revenue-chart-panel">
                        <h6 class="chart-title">6-Month Revenue Trend</h6>
                        <canvas id="revenueTrendChart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="row g-4">
                <div class="col-lg-6">
                    <div class="invoice-list-panel">
                        <h6 class="invoice-list-title">
                            <i class="bi bi-exclamation-triangle-fill text-danger"></i>
                            Overdue Invoices
                        </h6>
                        <div class="invoice-list">
                            <a href="#" class="invoice-item urgency-critical">
                                <div class="invoice-info">
                                    <div class="invoice-number">#INV-2025-0142</div>
                                    <div class="invoice-client">Acme Corporation</div>
                                </div>
                                <div class="invoice-details">
                                    <div class="invoice-amount">£3,450.00</div>
                                    <div class="invoice-overdue">45 days overdue</div>
                                </div>
                            </a>
                            <a href="#" class="invoice-item urgency-high">
                                <div class="invoice-info">
                                    <div class="invoice-number">#INV-2025-0156</div>
                                    <div class="invoice-client">Tech Solutions Ltd</div>
                                </div>
                                <div class="invoice-details">
                                    <div class="invoice-amount">£1,200.00</div>
                                    <div class="invoice-overdue">18 days overdue</div>
                                </div>
                            </a>
                            <a href="#" class="invoice-item urgency-medium">
                                <div class="invoice-info">
                                    <div class="invoice-number">#INV-2025-0167</div>
                                    <div class="invoice-client">Digital Ventures</div>
                                </div>
                                <div class="invoice-details">
                                    <div class="invoice-amount">£890.00</div>
                                    <div class="invoice-overdue">9 days overdue</div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-6">
                    <div class="invoice-list-panel">
                        <h6 class="invoice-list-title">
                            <i class="bi bi-calendar-check text-info"></i>
                            Upcoming Invoices (30 days)
                        </h6>
                        <div class="invoice-list">
                            <a href="#" class="invoice-item urgency-upcoming">
                                <div class="invoice-info">
                                    <div class="invoice-number">#INV-2025-0189</div>
                                    <div class="invoice-client">Global Enterprises</div>
                                </div>
                                <div class="invoice-details">
                                    <div class="invoice-amount">£5,600.00</div>
                                    <div class="invoice-upcoming">Due in 5 days</div>
                                </div>
                            </a>
                            <a href="#" class="invoice-item urgency-upcoming">
                                <div class="invoice-info">
                                    <div class="invoice-number">#INV-2025-0190</div>
                                    <div class="invoice-client">StartUp Inc</div>
                                </div>
                                <div class="invoice-details">
                                    <div class="invoice-amount">£2,300.00</div>
                                    <div class="invoice-upcoming">Due in 12 days</div>
                                </div>
                            </a>
                            <a href="#" class="invoice-item urgency-upcoming">
                                <div class="invoice-info">
                                    <div class="invoice-number">#INV-2025-0191</div>
                                    <div class="invoice-client">Cloud Systems Co</div>
                                </div>
                                <div class="invoice-details">
                                    <div class="invoice-amount">£4,100.00</div>
                                    <div class="invoice-upcoming">Due in 21 days</div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 4. SYSTEM HEALTH & 5. SENTIMENT + 6. ACTIVITY -->
        <div class="row g-4 mb-4">
            <div class="col-lg-4">
                <!-- SYSTEM HEALTH -->
                <div class="system-panel">
                    <div class="panel-header">
                        <h2 class="panel-title">
                            <i class="bi bi-heart-pulse-fill"></i>
                            System Health
                        </h2>
                    </div>
                    <div class="panel-body">
                        <div class="health-metric">
                            <div class="health-label">Uptime (30d)</div>
                            <div class="health-value health-excellent">99.87%</div>
                        </div>
                        <div class="health-metric">
                            <div class="health-label">Avg Response Time</div>
                            <div class="health-value health-good">245ms</div>
                        </div>
                        <div class="health-metric">
                            <div class="health-label">Error Rate</div>
                            <div class="health-value health-excellent">0.12%</div>
                        </div>
                        <div class="health-metric">
                            <div class="health-label">Activity (1h)</div>
                            <div class="health-value health-good">47 events</div>
                        </div>
                    </div>
                </div>
                
                <!-- CUSTOMER SENTIMENT -->
                <div class="sentiment-panel mt-4">
                    <div class="panel-header">
                        <h2 class="panel-title">
                            <i class="bi bi-emoji-smile"></i>
                            Customer Sentiment
                        </h2>
                    </div>
                    <div class="panel-body">
                        <canvas id="sentimentChart"></canvas>
                        <div class="sentiment-summary mt-3">
                            <div class="sentiment-item">
                                <div class="sentiment-color sentiment-positive"></div>
                                <span>Positive: 142</span>
                            </div>
                            <div class="sentiment-item">
                                <div class="sentiment-color sentiment-neutral"></div>
                                <span>Neutral: 78</span>
                            </div>
                            <div class="sentiment-item">
                                <div class="sentiment-color sentiment-negative"></div>
                                <span>Negative: 23</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-8">
                <!-- ACTIVITY FEED -->
                <div class="activity-panel">
                    <div class="panel-header">
                        <h2 class="panel-title">
                            <i class="bi bi-activity"></i>
                            Activity Feed
                        </h2>
                        <div class="panel-actions">
                            <button class="btn btn-sm btn-outline-light" onclick="location.reload()">
                                <i class="bi bi-arrow-clockwise"></i> Refresh
                            </button>
                        </div>
                    </div>
                    <div class="panel-body">
                        <div class="activity-feed">
                            <div class="activity-item">
                                <div class="activity-icon activity-icon-ticket">
                                    <i class="bi bi-ticket-detailed"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-title">New Ticket: API Authentication Issues</div>
                                    <div class="activity-meta">Acme Corp • Dec 10, 8:45 AM</div>
                                </div>
                                <span class="badge priority-badge-high">HIGH</span>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon activity-icon-invoice">
                                    <i class="bi bi-receipt"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-title">Invoice #INV-2025-0192 Created</div>
                                    <div class="activity-meta">Tech Solutions • Dec 10, 8:30 AM</div>
                                </div>
                                <span class="badge status-badge-unpaid">UNPAID</span>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon activity-icon-ticket">
                                    <i class="bi bi-ticket-detailed"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-title">Ticket Resolved: Database Performance</div>
                                    <div class="activity-meta">Global Enterprises • Dec 10, 7:15 AM</div>
                                </div>
                                <span class="badge priority-badge-medium">MEDIUM</span>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon activity-icon-invoice">
                                    <i class="bi bi-receipt"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-title">Payment Received: Invoice #INV-2025-0175</div>
                                    <div class="activity-meta">StartUp Inc • Dec 10, 6:50 AM</div>
                                </div>
                                <span class="badge status-badge-paid">PAID</span>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon activity-icon-ticket">
                                    <i class="bi bi-ticket-detailed"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-title">New Ticket: Email Configuration Help</div>
                                    <div class="activity-meta">Digital Ventures • Dec 10, 5:30 AM</div>
                                </div>
                                <span class="badge priority-badge-low">LOW</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- TEAM WORKLOAD HEATMAP -->
                <div class="team-panel mt-4">
                    <div class="panel-header">
                        <h2 class="panel-title">
                            <i class="bi bi-people-fill"></i>
                            Team Workload Heatmap
                        </h2>
                    </div>
                    <div class="panel-body">
                        <div class="team-heatmap">
                            <div class="team-member load-heavy">
                                <div class="team-avatar">
                                    <i class="bi bi-person-circle"></i>
                                </div>
                                <div class="team-info">
                                    <div class="team-name">Sarah Johnson</div>
                                    <div class="team-stats">
                                        <span class="team-stat">
                                            <i class="bi bi-ticket"></i> 18
                                        </span>
                                        <span class="team-stat">
                                            <i class="bi bi-hourglass-split"></i> 12
                                        </span>
                                    </div>
                                </div>
                                <div class="team-load-indicator">
                                    <i class="bi bi-fire"></i>
                                </div>
                            </div>
                            <div class="team-member load-medium">
                                <div class="team-avatar">
                                    <i class="bi bi-person-circle"></i>
                                </div>
                                <div class="team-info">
                                    <div class="team-name">Michael Chen</div>
                                    <div class="team-stats">
                                        <span class="team-stat">
                                            <i class="bi bi-ticket"></i> 11
                                        </span>
                                        <span class="team-stat">
                                            <i class="bi bi-hourglass-split"></i> 7
                                        </span>
                                    </div>
                                </div>
                                <div class="team-load-indicator">
                                    <i class="bi bi-exclamation-circle"></i>
                                </div>
                            </div>
                            <div class="team-member load-light">
                                <div class="team-avatar">
                                    <i class="bi bi-person-circle"></i>
                                </div>
                                <div class="team-info">
                                    <div class="team-name">Emma Thompson</div>
                                    <div class="team-stats">
                                        <span class="team-stat">
                                            <i class="bi bi-ticket"></i> 5
                                        </span>
                                        <span class="team-stat">
                                            <i class="bi bi-hourglass-split"></i> 3
                                        </span>
                                    </div>
                                </div>
                                <div class="team-load-indicator">
                                    <i class="bi bi-check-circle"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Revenue Gauge Chart
        const revenueGaugeCtx = document.getElementById('revenueGauge').getContext('2d');
        const revenuePercentage = 75;
        
        new Chart(revenueGaugeCtx, {
            type: 'doughnut',
            data: {
                datasets: [{
                    data: [revenuePercentage, 100 - revenuePercentage],
                    backgroundColor: [
                        '#10b981',
                        'rgba(255, 255, 255, 0.1)'
                    ],
                    borderWidth: 0
                }]
            },
            options: {
                cutout: '80%',
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: { display: false },
                    tooltip: { enabled: false }
                }
            },
            plugins: [{
                id: 'centerText',
                afterDraw: function(chart) {
                    const ctx = chart.ctx;
                    const centerX = (chart.chartArea.left + chart.chartArea.right) / 2;
                    const centerY = (chart.chartArea.top + chart.chartArea.bottom) / 2;
                    
                    ctx.save();
                    ctx.font = 'bold 32px Inter';
                    ctx.fillStyle = '#fff';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText(revenuePercentage + '%', centerX, centerY);
                    ctx.restore();
                }
            }]
        });

        // Revenue Trend Chart
        const revenueTrendCtx = document.getElementById('revenueTrendChart').getContext('2d');
        
        new Chart(revenueTrendCtx, {
            type: 'line',
            data: {
                labels: ['Jul 2025', 'Aug 2025', 'Sep 2025', 'Oct 2025', 'Nov 2025', 'Dec 2025'],
                datasets: [{
                    label: 'Revenue',
                    data: [18500, 21200, 19800, 22500, 23400, 24600],
                    borderColor: '#3b82f6',
                    backgroundColor: 'rgba(59, 130, 246, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        padding: 12,
                        callbacks: {
                            label: function(context) {
                                return '£' + context.parsed.y.toFixed(2);
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            color: 'rgba(255, 255, 255, 0.7)',
                            callback: function(value) {
                                return '£' + value.toLocaleString();
                            }
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        },
                        ticks: {
                            color: 'rgba(255, 255, 255, 0.7)'
                        }
                    }
                }
            }
        });

        // Sentiment Chart
        const sentimentCtx = document.getElementById('sentimentChart').getContext('2d');
        
        new Chart(sentimentCtx, {
            type: 'doughnut',
            data: {
                labels: ['Positive', 'Neutral', 'Negative'],
                datasets: [{
                    data: [142, 78, 23],
                    backgroundColor: ['#10b981', '#f59e0b', '#ef4444'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        padding: 12
                    }
                }
            }
        });
    </script>
</body>
</html>
